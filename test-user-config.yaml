name: user-test-config
artifactStorePath: .ignore.test-user-artifact-store.yaml

engines:
  # Problem 2: Your 7-step generate-all builder (multi-engine)
  - alias: generate-all
    type: builder
    builder:
      - engine: go://generic-builder
        spec:
          command: "echo"
          args: ["Step 1: go mod tidy"]
      - engine: go://generic-builder
        spec:
          command: "echo"
          args: ["Step 2: go generate ./..."]
      - engine: go://generic-builder
        spec:
          command: "echo"
          args: ["Step 3: controller-gen object"]
      - engine: go://generic-builder
        spec:
          command: "echo"
          args: ["Step 4: controller-gen crd"]
      - engine: go://generic-builder
        spec:
          command: "echo"
          args: ["Step 5: conversion-gen"]
      - engine: go://generic-builder
        spec:
          command: "echo"
          args: ["Step 6: client-gen"]
      - engine: go://generic-builder
        spec:
          command: "echo"
          args: ["Step 7: lister/informer-gen"]

  # Your e2e-test multi-engine test runner
  - alias: e2e-test
    type: test-runner
    testRunner:
      - engine: go://generic-test-runner
        spec:
          command: "echo"
          args: ["Running e2e tests"]

build:
  - name: generated-code
    src: .
    dest: .
    engine: alias://generate-all

test:
  - name: e2e
    runner: alias://e2e-test
